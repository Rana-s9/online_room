{
  "version": 3,
  "sources": ["../../javascript/custom/door.js"],
  "sourcesContent": ["let mixer;\nconst clock = new THREE.Clock();\n\nconst scene = new THREE.Scene();\nconst camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\nconst canvas   = document.getElementById('three-canvas');\nconst renderer = new THREE.WebGLRenderer({ canvas, antialias: true });\nrenderer.setSize(window.innerWidth, window.innerHeight); // \u5B9F\u30D4\u30AF\u30BB\u30EB\u3067\u8A2D\u5B9A\nrenderer.setPixelRatio(window.devicePixelRatio);\nscene.background = new THREE.Color('#F8F8F0');\n\nconst light = new THREE.DirectionalLight(0xffffff, 1);\nlight.position.set(10, 10, 10).normalize();\nscene.add(light);\n\nconst ambientLight = new THREE.AmbientLight(0x404040, 1.5);\nscene.add(ambientLight);\n\nlet dracoLoader = new THREE.DRACOLoader();\ndracoLoader.setDecoderPath('https://www.gstatic.com/draco/v1/decoders/');\n\nlet loader = new THREE.GLTFLoader();\nloader.setDRACOLoader(dracoLoader);\n\nloader.load('/door.glb', function (gltf) {\nconst model = gltf.scene;\nconsole.log(\"\u30E2\u30C7\u30EB\u304C\u8AAD\u307F\u8FBC\u307E\u308C\u307E\u3057\u305F:\", model);\nmodel.scale.set(0.8, 0.8, 0.8);\n\nconst box = new THREE.Box3().setFromObject(model);\nconst center = box.getCenter(new THREE.Vector3());\n\nmodel.position.sub(center);\nscene.add(model);\n\nmixer = new THREE.AnimationMixer(model);\nwindow.mixer = mixer;\nwindow.doorAnimationClips = gltf.animations;\n\nconst doorBtn = document.getElementById(\"blue-door\");\nif (doorBtn) {\ndoorBtn.addEventListener(\"click\", (e) => {\n\nconst animationNames = [\n    \"CubeAction.001\"\n];\n\nif (window.mixer && window.doorAnimationClips) {\n    let maxDuration = 0;\n\n    animationNames.forEach(name => {\n    const clip = window.doorAnimationClips.find(c => c.name === name);\n    if (clip) {\n        const action = window.mixer.clipAction(clip);\n        action.reset();\n        action.setLoop(THREE.LoopOnce, 1);\n        action.clampWhenFinished = true;\n        action.play();\n\n        // \u4E00\u756A\u9577\u3044duration\u3092\u53D6\u5F97\n        if (clip.duration > maxDuration) {\n        maxDuration = clip.duration;\n        }\n    }\n    });\n\n    // \u5168\u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u7D42\u4E86\u5F8C\u306B\u9077\u79FB\n    setTimeout(() => {\n    doorBtn.closest(\"form\").submit(); // \u2190\u3053\u3053\u3067form\u9001\u4FE1\n    }, maxDuration * 1000);\n} else {\n    // \u30A2\u30CB\u30E1\u30FC\u30B7\u30E7\u30F3\u304C\u306A\u3044\u5834\u5408\u306F\u305D\u306E\u307E\u307E\u9001\u4FE1\n    doorBtn.closest(\"form\").submit();\n}\n});\n}\n}, undefined, function (error) {\nconsole.error(\"\u30E2\u30C7\u30EB\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F:\", error);\n});\n\ncamera.position.set(10, -5, 0);\ncamera.lookAt(0, 2, 0);\n\nconst controls = new THREE.OrbitControls(camera, renderer.domElement);\ncontrols.enableDamping = true;\ncontrols.dampingFactor = 0.05;\ncontrols.screenSpacePanning = false;\ncontrols.maxPolarAngle = Math.PI / 2;\n\nfunction animate() {\nrequestAnimationFrame(animate);\ncontrols.update();\n\nconst delta = clock.getDelta();\nif (mixer) mixer.update(delta);\n\nrenderer.render(scene, camera);\n}\nanimate();\n\nwindow.addEventListener('resize', () => {\nconst width  = window.innerWidth;\nconst height = window.innerHeight;\nrenderer.setSize(width, height);\ncamera.aspect = width / height;\ncamera.updateProjectionMatrix();\n});"],
  "mappings": "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",
  "names": []
}
