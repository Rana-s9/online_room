{
  "version": 3,
  "sources": ["../../javascript/custom/door.js"],
  "sourcesContent": ["let mixer;\nconst clock = new THREE.Clock();\n\nconst scene = new THREE.Scene();\nconst camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\nconst canvas   = document.getElementById('three-canvas');\nconst renderer = new THREE.WebGLRenderer({ canvas, antialias: true });\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setPixelRatio(window.devicePixelRatio);\nscene.background = new THREE.Color('#F8F8F0');\n\nconst light = new THREE.DirectionalLight(0xffffff, 1);\nlight.position.set(10, 10, 10).normalize();\nscene.add(light);\n\nconst ambientLight = new THREE.AmbientLight(0x404040, 1.5);\nscene.add(ambientLight);\n\nlet dracoLoader = new THREE.DRACOLoader();\ndracoLoader.setDecoderPath('https://www.gstatic.com/draco/v1/decoders/');\n\nlet loader = new THREE.GLTFLoader();\nloader.setDRACOLoader(dracoLoader);\n\nloader.load('/door.glb', function (gltf) {\nconst model = gltf.scene;\nmodel.scale.set(0.8, 0.8, 0.8);\n\nconst box = new THREE.Box3().setFromObject(model);\nconst center = box.getCenter(new THREE.Vector3());\n\nmodel.position.sub(center);\nscene.add(model);\n\nmixer = new THREE.AnimationMixer(model);\nwindow.mixer = mixer;\nwindow.doorAnimationClips = gltf.animations;\n\nconst doorButtons = document.querySelectorAll(\".door-button\");\ndoorButtons.forEach((doorBtn) => {\n  doorBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n\n    const animationNames = [\"CubeAction.001\"];\n\n    if (window.mixer && window.doorAnimationClips) {\n      let maxDuration = 0;\n\n      animationNames.forEach((name) => {\n        const clip = window.doorAnimationClips.find((c) => c.name === name);\n        if (clip) {\n          const action = window.mixer.clipAction(clip);\n          action.reset();\n          action.setLoop(THREE.LoopOnce, 1);\n          action.clampWhenFinished = true;\n          action.play();\n          maxDuration = Math.max(maxDuration, clip.duration);\n        }\n      });\n\n      setTimeout(() => {\n        window.location.href = doorBtn.href;\n      }, maxDuration * 1000);\n    } else {\n      window.location.href = doorBtn.href;\n    }\n  });\n});\n});\n\ncamera.position.set(10, -5, 0);\ncamera.lookAt(0, 2, 0);\n\nconst controls = new THREE.OrbitControls(camera, renderer.domElement);\ncontrols.enableDamping = true;\ncontrols.dampingFactor = 0.05;\ncontrols.screenSpacePanning = false;\ncontrols.maxPolarAngle = Math.PI / 2;\n\nfunction animate() {\nrequestAnimationFrame(animate);\ncontrols.update();\n\nconst delta = clock.getDelta();\nif (mixer) mixer.update(delta);\n\nrenderer.render(scene, camera);\n}\nanimate();\n\nwindow.addEventListener('resize', () => {\nconst width  = window.innerWidth;\nconst height = window.innerHeight;\nrenderer.setSize(width, height);\ncamera.aspect = width / height;\ncamera.updateProjectionMatrix();\n});"],
  "mappings": "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",
  "names": []
}
