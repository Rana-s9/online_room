{
  "version": 3,
  "sources": ["../../javascript/custom/home.js"],
  "sourcesContent": ["document.addEventListener(\"turbo:load\", () => {\n  if (window._threeInitialized) return;\n  window._threeInitialized = true;\n  var mixer;\n  const clock = new THREE.Clock();\n\n  const scene = new THREE.Scene();\n  let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  let customCamera1;\n\n  const canvas   = document.getElementById('three-canvas');\n  const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });\n  renderer.setSize(canvas.clientWidth, canvas.clientHeight);\n  scene.background = new THREE.Color('#F8F8F0');\n\n  const light = new THREE.DirectionalLight(0xffffff, 1);\n  light.position.set(10, 10, 10).normalize();\n  scene.add(light);\n\n  const ambientLight = new THREE.AmbientLight(0x404040, 1.5);\n  scene.add(ambientLight);\n\n  let dracoLoader = new THREE.DRACOLoader();\n  dracoLoader.setDecoderPath('https://www.gstatic.com/draco/v1/decoders/');\n\n  let loader = new THREE.GLTFLoader();\n  loader.setDRACOLoader(dracoLoader);\n\n  loader.load('/home.glb', function (gltf) {\n  const model = gltf.scene;\n  model.scale.set(1, 1, 1);\n  scene.add(model);\n\n  mixer = new THREE.AnimationMixer(model);\n  window.mixer = mixer;\n  window.bookAnimationClips = gltf.animations;\n  window.doorAnimationClips = gltf.animations;\n\n  if (gltf.cameras && gltf.cameras.length > 0) {\n  const cameraName = \"1\u30AB\u30E1\";\n  const foundCamera = gltf.cameras.find(cam => cam.name === cameraName);\n    if (foundCamera) {\n      customCamera1 = foundCamera;\n      customCamera1.up.set(0, 1, 0);\n      customCamera1.rotation.y += Math.PI;\n      customCamera1.position.z += 1;\n    }\n  }\n\n  const bookBtn = document.getElementById(\"open-book\");\nif (bookBtn) {\n  bookBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n\n    const animationNames = [\n      \"BookOpen\", \"Action.004\", \"Action.005\", \"Action.006\", \"Action.007\", \"Action.008\",\n      \"Action.009\", \"Action.010\", \"Action.011\", \"Action.012\", \"Action.013\", \"Action.014\",\n      \"Action.015\", \"Action.016\", \"Action.017\", \"Action.018\", \"Action.001\", \"Action.002\",\n      \"Action\"\n    ];\n\n    if (customCamera1) {\n      customCamera1.aspect = camera.aspect;\n      customCamera1.updateProjectionMatrix();\n      controls.object = customCamera1;\n      camera = customCamera1;\n      scene.add(camera);\n    }\n\n    if (window.mixer && window.doorAnimationClips) {\n      let maxDuration = 0;\n\n      animationNames.forEach(name => {\n        const clip = window.bookAnimationClips.find(c => c.name === name);\n        if (clip) {\n          const action = window.mixer.clipAction(clip);\n          action.reset();\n          action.setLoop(THREE.LoopOnce, 1);\n          action.clampWhenFinished = true;\n          action.play();\n\n          if (clip.duration > maxDuration) {\n            maxDuration = clip.duration;\n          }\n        }\n      });\n\n      setTimeout(() => {\n        window.location.href = bookBtn.dataset.roomPath;\n      }, maxDuration * 1000);\n    } else {\n      window.location.href = bookBtn.dataset.roomPath;\n    }\n  });\n}\n\n const spotBtn = document.getElementById(\"open-door\");\nif (spotBtn) {\n  spotBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n\n    const doorNames = [\n      \"part_key_window.004Action\", \"key_window_hook.003Action\"\n    ];\n\n    if (window.mixer && window.bookAnimationClips) {\n      let maxDuration = 0;\n\n      doorNames.forEach(name => {\n        const clip = window.doorAnimationClips.find(c => c.name === name);\n        if (clip) {\n          const action = window.mixer.clipAction(clip);\n          action.reset();\n          action.setLoop(THREE.LoopOnce, 1);\n          action.clampWhenFinished = true;\n          action.play();\n\n          if (clip.duration > maxDuration) {\n            maxDuration = clip.duration;\n          }\n        }\n      });\n\n      setTimeout(() => {\n        window.location.href = spotBtn.dataset.roomPath;\n      }, maxDuration * 1000);\n    } else {\n      window.location.href = spotBtn.dataset.roomPath;\n    }\n  });\n}\n}, undefined, function (error) {\n});\n\n  camera.position.z = 5;\n\n  const controls = new THREE.OrbitControls(camera, renderer.domElement);\n  controls.enableDamping = true;\n  controls.dampingFactor = 0.05;\n  controls.screenSpacePanning = false;\n  controls.maxPolarAngle = Math.PI / 2;\n\n  function animate() {\n    requestAnimationFrame(animate);\n    controls.update();\n\n    const delta = clock.getDelta();\n    if (mixer) mixer.update(delta);\n\n    renderer.render(scene, camera);\n  }\n  animate();\n\n  window.addEventListener('resize', () => {\n    const width  = canvas.clientWidth;\n    const height = canvas.clientHeight;\n    renderer.setSize(width, height);\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n  });\n});\n"],
  "mappings": "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",
  "names": []
}
